<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>가위 바위 보 게임</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f0f0f0;
            text-align: center;
            padding: 50px;
        }
        .button {
            margin: 10px;
            padding: 15px 30px;
            font-size: 16px;
            cursor: pointer;
        }
        #result {
            margin-top: 20px;
            font-size: 24px;
        }
        #hp {
            margin-top: 20px;
            font-size: 20px;
        }
    </style>
</head>
<body>

<h1>가위 바위 보 게임</h1>
<button class="button" id="rock">바위</button>
<button class="button" id="scissors">가위</button>
<button class="button" id="paper">보</button>
<button class="button" id="restart" style="display: none;">다시하기</button>

<div id="result"></div>
<div id="hp">플레이어 HP: 3 | 컴퓨터 HP: 3</div>

<audio id="bg-music" src="background.mp3" loop></audio>

<script>
    const choices = ['바위', '가위', '보'];
    let playerHP = 3;
    let computerHP = 3;
    const resultDisplay = document.getElementById('result');
    const hpDisplay = document.getElementById('hp');
    const bgMusic = document.getElementById('bg-music');

    function getComputerChoice() {
        const randomIndex = Math.floor(Math.random() * choices.length);
        return choices[randomIndex];
    }

    function playGame(playerChoice) {
        const computerChoice = getComputerChoice();
        let result;

        if (playerChoice === computerChoice) {
            result = '비겼습니다!';
        } else if (
            (playerChoice === '바위' && computerChoice === '가위') ||
            (playerChoice === '가위' && computerChoice === '보') ||
            (playerChoice === '보' && computerChoice === '바위')
        ) {
            computerHP--;
            result = '당신이 이겼습니다!';
        } else {
            playerHP--;
            result = '컴퓨터가 이겼습니다!';
        }

        updateHP();
        resultDisplay.innerHTML = `당신의 선택: ${playerChoice} <br> 컴퓨터의 선택: ${computerChoice} <br>${result}`;
        
        // 음악 재생
        bgMusic.play();
    }

    function updateHP() {
        hpDisplay.innerHTML = `플레이어 HP: ${playerHP} | 컴퓨터 HP: ${computerHP}`;
        if (playerHP <= 0) {
            resultDisplay.innerHTML += "<br>게임 오버! 컴퓨터가 이겼습니다!";
            disableButtons();
        } else if (computerHP <= 0) {
            resultDisplay.innerHTML += "<br>축하합니다! 당신이 이겼습니다!";
            disableButtons();
        }
    }

    function disableButtons() {
        document.getElementById('rock').disabled = true;
        document.getElementById('scissors').disabled = true;
        document.getElementById('paper').disabled = true;
        document.getElementById('restart').style.display = 'block'; // 다시하기 버튼 표시
    }

    function resetGame() {
        playerHP = 3;
        computerHP = 3;
        resultDisplay.innerHTML = '';
        hpDisplay.innerHTML = `플레이어 HP: ${playerHP} | 컴퓨터 HP: ${computerHP}`;
        document.getElementById('rock').disabled = false;
        document.getElementById('scissors').disabled = false;
        document.getElementById('paper').disabled = false;
        document.getElementById('restart').style.display = 'none'; // 다시하기 버튼 숨기기
        bgMusic.currentTime = 0; // 음악을 처음으로 돌립니다.
        bgMusic.play(); // 음악 재생
    }

    document.getElementById('rock').addEventListener('click', () => playGame('바위'));
    document.getElementById('scissors').addEventListener('click', () => playGame('가위'));
    document.getElementById('paper').addEventListener('click', () => playGame('보'));
    document.getElementById('restart').addEventListener('click', resetGame);
</script>

</body>
</html>
